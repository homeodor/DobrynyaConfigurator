<script lang="ts">
	let dialog: HTMLDialogElement;
	export let errorText = "";
	export let commandText = "";
	
	export function block()
	{
		if (dialog.open) return;
		dialog.showModal();
	}
	
	export function unblock()
	{
		errorText = "";
		commandText = "";
		dialog.close();
	}
	
	export function error(c: string, t: string)
	{
		commandText = c;
		errorText = t;
	}

</script>

<dialog id="blocker" bind:this={dialog}>
	{#if !errorText}
	<div id="blocker-active">
		<svg version="1.1" id="bubble-svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 512 512" style="enable-background:new 0 0 512 512;" xml:space="preserve"><g><defs><path id="bubble-mask-path1" d="M399.9,152.8v206.4c0,22.5-18.2,40.7-40.7,40.7H152.8c-22.5,0-40.7-18.2-40.7-40.7V152.8 c0-22.5,18.2-40.7,40.7-40.7h206.4C381.7,112.1,399.9,130.3,399.9,152.8z M256,512c141.4,0,256-114.6,256-256S397.4,0,256,0 S0,114.6,0,256S114.6,512,256,512z"/></defs><clipPath id="bubble-mask-path2"><use xlink:href="#bubble-mask-path1"  style="overflow:visible;"/></clipPath><g id="bubble-clip"><path id="bubble" d="M359.3,127H152.7c-14.2,0-25.7,11.5-25.7,25.7v206.6c0,14.2,11.5,25.7,25.7,25.7h206.6 c14.2,0,25.7-11.5,25.7-25.7V152.7C385,138.5,373.5,127,359.3,127z"/></g></g><g id="bubble-dobrynya"><g><path d="M359.2,123.1c16.4,0,29.7,13.3,29.7,29.7v206.4c0,16.4-13.3,29.7-29.7,29.7H152.8 c-16.4,0-29.7-13.3-29.7-29.7V152.8c0-16.4,13.3-29.7,29.7-29.7H359.2 M359.2,112.1H152.8c-22.5,0-40.7,18.2-40.7,40.7v206.4 c0,22.5,18.2,40.7,40.7,40.7h206.4c22.5,0,40.7-18.2,40.7-40.7V152.8C399.9,130.3,381.7,112.1,359.2,112.1L359.2,112.1z"/></g><g><g><g><path d="M161.7,145.3c9.1,0,16.5,7.4,16.5,16.5s-7.4,16.5-16.5,16.5s-16.5-7.4-16.5-16.5S152.6,145.3,161.7,145.3 M161.7,134.3c-15.2,0-27.5,12.3-27.5,27.5s12.3,27.5,27.5,27.5s27.5-12.3,27.5-27.5S176.9,134.3,161.7,134.3L161.7,134.3z"/></g><g><path d="M161.7,208.1c9.1,0,16.5,7.4,16.5,16.5s-7.4,16.5-16.5,16.5s-16.5-7.4-16.5-16.5S152.6,208.1,161.7,208.1 M161.7,197.1c-15.2,0-27.5,12.3-27.5,27.5s12.3,27.5,27.5,27.5s27.5-12.3,27.5-27.5S176.9,197.1,161.7,197.1L161.7,197.1z"/></g><g><path d="M161.7,270.9c9.1,0,16.5,7.4,16.5,16.5s-7.4,16.5-16.5,16.5s-16.5-7.4-16.5-16.5S152.6,270.9,161.7,270.9 M161.7,259.9c-15.2,0-27.5,12.3-27.5,27.5c0,15.2,12.3,27.5,27.5,27.5s27.5-12.3,27.5-27.5 C189.2,272.2,176.9,259.9,161.7,259.9L161.7,259.9z"/></g><g><path d="M161.7,333.7c9.1,0,16.5,7.4,16.5,16.5s-7.4,16.5-16.5,16.5s-16.5-7.4-16.5-16.5S152.6,333.7,161.7,333.7 M161.7,322.7c-15.2,0-27.5,12.3-27.5,27.5s12.3,27.5,27.5,27.5s27.5-12.3,27.5-27.5S176.9,322.7,161.7,322.7L161.7,322.7z"/></g></g><g><g><path d="M350.3,145.3c9.1,0,16.5,7.4,16.5,16.5s-7.4,16.5-16.5,16.5s-16.5-7.4-16.5-16.5S341.2,145.3,350.3,145.3 M350.3,134.3c-15.2,0-27.5,12.3-27.5,27.5s12.3,27.5,27.5,27.5s27.5-12.3,27.5-27.5S365.5,134.3,350.3,134.3L350.3,134.3z"/></g><g><path d="M350.3,208.1c9.1,0,16.5,7.4,16.5,16.5s-7.4,16.5-16.5,16.5s-16.5-7.4-16.5-16.5S341.2,208.1,350.3,208.1 M350.3,197.1c-15.2,0-27.5,12.3-27.5,27.5s12.3,27.5,27.5,27.5s27.5-12.3,27.5-27.5S365.5,197.1,350.3,197.1L350.3,197.1z"/></g><g><path d="M350.3,270.9c9.1,0,16.5,7.4,16.5,16.5s-7.4,16.5-16.5,16.5s-16.5-7.4-16.5-16.5S341.2,270.9,350.3,270.9 M350.3,259.9c-15.2,0-27.5,12.3-27.5,27.5c0,15.2,12.3,27.5,27.5,27.5s27.5-12.3,27.5-27.5 C377.8,272.2,365.5,259.9,350.3,259.9L350.3,259.9z"/></g><g><path d="M350.3,333.7c9.1,0,16.5,7.4,16.5,16.5s-7.4,16.5-16.5,16.5s-16.5-7.4-16.5-16.5S341.2,333.7,350.3,333.7 M350.3,322.7c-15.2,0-27.5,12.3-27.5,27.5s12.3,27.5,27.5,27.5s27.5-12.3,27.5-27.5S365.5,322.7,350.3,322.7L350.3,322.7z"/></g></g><g><g><path d="M287.4,145.3c9.1,0,16.5,7.4,16.5,16.5s-7.4,16.5-16.5,16.5s-16.5-7.4-16.5-16.5S278.3,145.3,287.4,145.3 M287.4,134.3c-15.2,0-27.5,12.3-27.5,27.5s12.3,27.5,27.5,27.5s27.5-12.3,27.5-27.5S302.6,134.3,287.4,134.3L287.4,134.3z"/></g><g><path d="M287.4,208.1c9.1,0,16.5,7.4,16.5,16.5s-7.4,16.5-16.5,16.5s-16.5-7.4-16.5-16.5S278.3,208.1,287.4,208.1 M287.4,197.1c-15.2,0-27.5,12.3-27.5,27.5s12.3,27.5,27.5,27.5s27.5-12.3,27.5-27.5S302.6,197.1,287.4,197.1L287.4,197.1z"/></g><g><path d="M287.4,270.9c9.1,0,16.5,7.4,16.5,16.5s-7.4,16.5-16.5,16.5s-16.5-7.4-16.5-16.5S278.3,270.9,287.4,270.9 M287.4,259.9c-15.2,0-27.5,12.3-27.5,27.5c0,15.2,12.3,27.5,27.5,27.5s27.5-12.3,27.5-27.5 C314.9,272.2,302.6,259.9,287.4,259.9L287.4,259.9z"/></g><g><path d="M287.4,333.7c9.1,0,16.5,7.4,16.5,16.5s-7.4,16.5-16.5,16.5s-16.5-7.4-16.5-16.5S278.3,333.7,287.4,333.7 M287.4,322.7c-15.2,0-27.5,12.3-27.5,27.5s12.3,27.5,27.5,27.5s27.5-12.3,27.5-27.5S302.6,322.7,287.4,322.7L287.4,322.7z"/></g></g><g><g><path d="M224.6,145.3c9.1,0,16.5,7.4,16.5,16.5s-7.4,16.5-16.5,16.5s-16.5-7.4-16.5-16.5S215.5,145.3,224.6,145.3 M224.6,134.3c-15.2,0-27.5,12.3-27.5,27.5s12.3,27.5,27.5,27.5s27.5-12.3,27.5-27.5S239.8,134.3,224.6,134.3L224.6,134.3z"/></g><g><path d="M224.6,208.1c9.1,0,16.5,7.4,16.5,16.5s-7.4,16.5-16.5,16.5s-16.5-7.4-16.5-16.5S215.5,208.1,224.6,208.1 M224.6,197.1c-15.2,0-27.5,12.3-27.5,27.5s12.3,27.5,27.5,27.5s27.5-12.3,27.5-27.5S239.8,197.1,224.6,197.1L224.6,197.1z"/></g><g><path d="M224.6,270.9c9.1,0,16.5,7.4,16.5,16.5s-7.4,16.5-16.5,16.5s-16.5-7.4-16.5-16.5S215.5,270.9,224.6,270.9 M224.6,259.9c-15.2,0-27.5,12.3-27.5,27.5c0,15.2,12.3,27.5,27.5,27.5s27.5-12.3,27.5-27.5 C252.1,272.2,239.8,259.9,224.6,259.9L224.6,259.9z"/></g><g><path d="M224.6,333.7c9.1,0,16.5,7.4,16.5,16.5s-7.4,16.5-16.5,16.5s-16.5-7.4-16.5-16.5S215.5,333.7,224.6,333.7 M224.6,322.7c-15.2,0-27.5,12.3-27.5,27.5s12.3,27.5,27.5,27.5s27.5-12.3,27.5-27.5S239.8,322.7,224.6,322.7L224.6,322.7z"/></g></g></g></g><g id="bubble-frame"><path d="M256,11c33.1,0,65.2,6.5,95.4,19.2c29.2,12.3,55.4,30,77.9,52.5s40.2,48.7,52.5,77.9 c12.8,30.2,19.2,62.3,19.2,95.4s-6.5,65.2-19.2,95.4c-12.3,29.2-30,55.4-52.5,77.9s-48.7,40.2-77.9,52.5 C321.2,494.5,289.1,501,256,501s-65.2-6.5-95.4-19.2c-29.2-12.3-55.4-30-77.9-52.5s-40.2-48.7-52.5-77.9 C17.5,321.2,11,289.1,11,256s6.5-65.2,19.2-95.4c12.3-29.2,30-55.4,52.5-77.9s48.7-40.2,77.9-52.5C190.8,17.5,222.9,11,256,11 M256,0C114.6,0,0,114.6,0,256s114.6,256,256,256s256-114.6,256-256S397.4,0,256,0L256,0z"/></g></svg>
		
	</div>
	{:else}
	<div id="blocker-error" class="plashkabad plashka">
		{#if commandText != ""}
		<p>The configurator failed to {commandText.toLowerCase()}.</p>
		{/if}
		<p>{errorText}</p>
		<p><button on:click={unblock}>Okay :(</button></p>
	</div>
	{/if}
	
</dialog>